<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car's 'R' Us</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

</head>
<body class="container">
  <h1>Cars 'R' Us</h1>
  <button id="btn-fetch-cars" class="btn btn-primary">Fetch Cars</button>
  <button id="btn-fetch-members" class="btn btn-primary">Fetch Members</button>
  <table class="table">
    <thead id="tbl-head"></thead>
    <tbody id="tbl-body"></tbody>
  </table>

<script>
  const fetchCars = document.getElementById('btn-fetch-cars');
  const fetchMembers = document.getElementById('btn-fetch-members');
  const tableBody = document.querySelector('#table-body');
  const urlCars = 'api/cars';
  const urlMembers = 'api/members';

  fetchCars.addEventListener('click', () => {
    fetch(urlCars)
            .then(response => response.json())
            .then(cars => {
              const rowsAsStr = cars.map(car => {
                return `<tr>
                        <td>${car.brand}</td>
                        <td>${car.model}</td>
                        <td>${car.pricePrDay}</td>
                    </tr>`
              }).join('');
              document.getElementById('tbl-head').innerHTML = `<tr>
                        <th>Brand</th>
                        <th>Model</th>
                        <th>Price Pr Day</th>
                    </tr>`;
              document.getElementById("tbl-body").innerHTML = rowsAsStr;
            });
  });

  fetchMembers.addEventListener('click', () => {
      fetch(urlMembers)
          .then(response => response.json())
          .then(members => {
              const rowsAsStr = members.map(member => {
                  return `<tr>
                        <td>${member.username}</td>
                        <td>${member.email}</td>
                        <td>${member.firstName}</td>
                    </tr>`
              }).join('');
              document.getElementById('tbl-head').innerHTML = `<tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Firstname</th>
                    </tr>`;
              document.getElementById("tbl-body").innerHTML = rowsAsStr;
          });
  });
</script>
</body>
</html>